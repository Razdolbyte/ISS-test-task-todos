import{k as H,q as M,r as T,v as I,j as C,x as R,y as q,z as k,A as B,c as _,B as A,u as K}from"./index-B27dK5jT.js";function U(e){return R()?(q(e),!0):!1}const Q=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const X=e=>typeof e<"u",Y=Object.prototype.toString,Z=e=>Y.call(e)==="[object Object]";function ee(e,t){function n(...s){return new Promise((o,d)=>{Promise.resolve(e(()=>t.apply(this,s),{fn:t,thisArg:this,args:s})).then(o).catch(d)})}return n}const L=e=>e();function te(e=L){const t=T(!0);function n(){t.value=!1}function s(){t.value=!0}const o=(...d)=>{t.value&&e(...d)};return{isActive:I(t),pause:n,resume:s,eventFilter:o}}function ne(e){return k()}function W(e){return Array.isArray(e)?e:[e]}function re(e,t,n={}){const{eventFilter:s=L,...o}=n;return C(e,ee(s,t),o)}function ie(e,t,n={}){const{eventFilter:s,...o}=n,{eventFilter:d,pause:v,resume:i,isActive:u}=te(s);return{stop:re(e,t,{...o,eventFilter:d}),pause:v,resume:i,isActive:u}}function ue(e,t=!0,n){ne()?H(e,n):t?e():M(e)}function oe(e,t,n){return C(e,t,{...n,immediate:!0})}const D=Q?window:void 0;function le(e){var t;const n=A(e);return(t=n==null?void 0:n.$el)!=null?t:n}function x(...e){const t=[],n=()=>{t.forEach(i=>i()),t.length=0},s=(i,u,l,y)=>(i.addEventListener(u,l,y),()=>i.removeEventListener(u,l,y)),o=_(()=>{const i=W(A(e[0])).filter(u=>u!=null);return i.every(u=>typeof u!="string")?i:void 0}),d=oe(()=>{var i,u;return[(u=(i=o.value)==null?void 0:i.map(l=>le(l)))!=null?u:[D].filter(l=>l!=null),W(A(o.value?e[1]:e[0])),W(K(o.value?e[2]:e[1])),A(o.value?e[3]:e[2])]},([i,u,l,y])=>{if(n(),!(i!=null&&i.length)||!(u!=null&&u.length)||!(l!=null&&l.length))return;const h=Z(y)?{...y}:y;t.push(...i.flatMap(N=>u.flatMap(c=>l.map(b=>s(N,c,b,h)))))},{flush:"post"}),v=()=>{d(),n()};return U(n),v}function ae(e){return JSON.parse(JSON.stringify(e))}const J=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},V="__vueuse_ssr_handlers__",se=ce();function ce(){return V in J||(J[V]=J[V]||{}),J[V]}function fe(e,t){return se[e]||t}function de(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const pe={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},z="vueuse-storage";function me(e,t,n,s={}){var o;const{flush:d="pre",deep:v=!0,listenToStorageChanges:i=!0,writeDefaults:u=!0,mergeDefaults:l=!1,shallow:y,window:h=D,eventFilter:N,onError:c=r=>{console.error(r)},initOnMounted:b}=s,p=(y?B:T)(typeof t=="function"?t():t),m=_(()=>A(e));if(!n)try{n=fe("getDefaultStorage",()=>{var r;return(r=D)==null?void 0:r.localStorage})()}catch(r){c(r)}if(!n)return p;const S=A(t),E=de(S),a=(o=s.serializer)!=null?o:pe[E],{pause:F,resume:w}=ie(p,()=>P(p.value),{flush:d,deep:v,eventFilter:N});C(m,()=>j(),{flush:d}),h&&i&&ue(()=>{n instanceof Storage?x(h,"storage",j,{passive:!0}):x(h,z,G),b&&j()}),b||j();function O(r,f){if(h){const g={key:m.value,oldValue:r,newValue:f,storageArea:n};h.dispatchEvent(n instanceof Storage?new StorageEvent("storage",g):new CustomEvent(z,{detail:g}))}}function P(r){try{const f=n.getItem(m.value);if(r==null)O(f,null),n.removeItem(m.value);else{const g=a.write(r);f!==g&&(n.setItem(m.value,g),O(f,g))}}catch(f){c(f)}}function $(r){const f=r?r.newValue:n.getItem(m.value);if(f==null)return u&&S!=null&&n.setItem(m.value,a.write(S)),S;if(!r&&l){const g=a.read(f);return typeof l=="function"?l(g,S):E==="object"&&!Array.isArray(g)?{...S,...g}:g}else return typeof f!="string"?f:a.read(f)}function j(r){if(!(r&&r.storageArea!==n)){if(r&&r.key==null){p.value=S;return}if(!(r&&r.key!==m.value)){F();try{(r==null?void 0:r.newValue)!==a.write(p.value)&&(p.value=$(r))}catch(f){c(f)}finally{r?M(w):w()}}}}function G(r){j(r.detail)}return p}function ge(e,t,n,s={}){var o,d,v;const{clone:i=!1,passive:u=!1,eventName:l,deep:y=!1,defaultValue:h,shouldEmit:N}=s,c=k(),b=n||(c==null?void 0:c.emit)||((o=c==null?void 0:c.$emit)==null?void 0:o.bind(c))||((v=(d=c==null?void 0:c.proxy)==null?void 0:d.$emit)==null?void 0:v.bind(c==null?void 0:c.proxy));let p=l;p=p||`update:${t.toString()}`;const m=a=>i?typeof i=="function"?i(a):ae(a):a,S=()=>X(e[t])?m(e[t]):h,E=a=>{N?N(a)&&b(p,a):b(p,a)};if(u){const a=S(),F=T(a);let w=!1;return C(()=>e[t],O=>{w||(w=!0,F.value=m(O),M(()=>w=!1))}),C(F,O=>{!w&&(O!==e[t]||y)&&E(O)},{deep:y}),F}else return _({get(){return S()},set(a){E(a)}})}export{ge as a,me as u};
