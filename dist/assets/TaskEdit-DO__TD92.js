import{u as C}from"./useTasksStore-e-v39l1S.js";import{a as w}from"./TaskList.vue_vue_type_style_index_0_scoped_750581dd_lang-BE_j9CjR.js";import{d as V,a as _,o as y,b as T,f as i,w as u,u as l,e as p,r as k,j as N,k as x,t as v,i as b,_ as A}from"./index-C9DQCKQG.js";const U={class:"task-form"},B=V({__name:"TaskForm",props:{task:{},errors:{}},emits:["update:task"],setup(f,{emit:n}){const o=w(f,"task",n);return(m,s)=>{const t=_("b-input"),e=_("b-field"),d=_("b-select");return y(),T("div",U,[i(e,{label:"Заголовок",type:m.errors.title?"is-danger":"",message:m.errors.title},{default:u(()=>[i(t,{modelValue:l(o).title,"onUpdate:modelValue":s[0]||(s[0]=a=>l(o).title=a),rounded:""},null,8,["modelValue"])]),_:1},8,["type","message"]),i(e,{label:"Описание"},{default:u(()=>[i(t,{modelValue:l(o).description,"onUpdate:modelValue":s[1]||(s[1]=a=>l(o).description=a),type:"textarea",rounded:""},null,8,["modelValue"])]),_:1}),i(e,{label:"Приоритет"},{default:u(()=>[i(d,{modelValue:l(o).priority,"onUpdate:modelValue":s[2]||(s[2]=a=>l(o).priority=a),rounded:""},{default:u(()=>s[3]||(s[3]=[p("option",{value:"low"},"Низкий",-1),p("option",{value:"medium"},"Средний",-1),p("option",{value:"high"},"Высокий",-1)])),_:1},8,["modelValue"])]),_:1})])}}}),E={class:"task-edit"},S={class:"task-edit__title"},$={class:"task-edit__actions"},D=V({__name:"TaskEdit",props:{id:{},closeAction:{type:Function}},setup(f){const n=f,c=C(),r=k({title:"",description:"",priority:"low"}),o=k({}),m=t=>{const e=c.getTask(Number(t));if(e){const{title:d,description:a,priority:g}=e;r.value={title:d,description:a,priority:g}}},s=t=>{if(!t.title){o.value.title="Заголовок обязателен";return}n.id?c.updateTask(Number(n.id),t):c.createTask(t),n.closeAction()};return N(()=>r.value.title,t=>{t?o.value={}:o.value.title="Заголовок обязателен"}),x(()=>{n.id&&m(n.id)}),(t,e)=>{const d=_("b-button");return y(),T("div",E,[p("h2",S,v(n.id?"Редактировать":"Создать")+" задачу",1),i(l(B),{task:r.value,"onUpdate:task":e[0]||(e[0]=a=>r.value=a),errors:o.value},null,8,["task","errors"]),p("div",$,[i(d,{type:"is-success",rounded:"",onClick:e[1]||(e[1]=a=>s(r.value))},{default:u(()=>[b(v(n.id?"Сохранить":"Создать"),1)]),_:1}),i(d,{type:"is-danger",rounded:"",onClick:t.closeAction},{default:u(()=>e[2]||(e[2]=[b(" Закрыть ")])),_:1},8,["onClick"])])])}}}),I=A(D,[["__scopeId","data-v-1d9cdcdf"]]);export{I as default};
