import{u as R}from"./TaskList.vue_vue_type_style_index_0_scoped_750581dd_lang-BE_j9CjR.js";import{d as L,r as S,c as E,a as d,o as w,b as x,e as t,f as o,w as l,g as I,h as P,i as U,t as V,n as N,_ as A,s as B,T as z,D as O,j as M,k as j,u as $,l as K,R as C,m as q,p as F}from"./index-C9DQCKQG.js";import{u as G}from"./useTasksStore-e-v39l1S.js";const H={class:"task-list"},J={class:"task-list__filters"},Q={class:"task-list__filter-group"},W={class:"task-list__table"},X=["onClick"],Y={class:"task-list__table-actions"},Z=L({__name:"TaskList",props:{tasks:{}},emits:["createTask","openTask","deleteTask","deleteTasks","editTask","updateTask"],setup(D,{emit:v}){const p=D,f=v,a=S({perPage:20,search:"",isCompleted:"all",priority:"all"}),u=S([]),b=E(()=>Array.from(p.tasks.values()).filter(s=>{const m=a.value.isCompleted==="all"?!0:s.isCompleted===(a.value.isCompleted==="true"),r=s.title.toLowerCase().includes(a.value.search.toLowerCase()),g=a.value.priority==="all"?!0:s.priority===a.value.priority;return m&&r&&g})),c=i=>{f("updateTask",i.id,{isCompleted:i.isCompleted})};return(i,s)=>{const m=d("b-select"),r=d("b-button"),g=d("b-input"),y=d("b-field"),k=d("b-table-column"),n=d("b-icon"),T=d("b-checkbox"),h=d("b-table");return w(),x("div",H,[t("div",J,[o(y,{grouped:"","group-multiline":""},{default:l(()=>[o(m,{class:"task-list__filter",modelValue:a.value.perPage,"onUpdate:modelValue":s[0]||(s[0]=e=>a.value.perPage=e),rounded:""},{default:l(()=>s[7]||(s[7]=[t("option",{value:"5"},"5",-1),t("option",{value:"20"},"20",-1),t("option",{value:"50"},"50",-1),t("option",{value:"100"},"100",-1),t("option",{value:"-1"},"Все",-1)])),_:1},8,["modelValue"]),o(m,{class:"task-list__filter",modelValue:a.value.isCompleted,"onUpdate:modelValue":s[1]||(s[1]=e=>a.value.isCompleted=e),rounded:""},{default:l(()=>s[8]||(s[8]=[t("option",{value:"all"},"Все",-1),t("option",{value:"true"},"Выполненные",-1),t("option",{value:"false"},"Не выполненные",-1)])),_:1},8,["modelValue"]),o(m,{class:"task-list__filter",modelValue:a.value.priority,"onUpdate:modelValue":s[2]||(s[2]=e=>a.value.priority=e),rounded:""},{default:l(()=>s[9]||(s[9]=[t("option",{value:"all"},"Все",-1),t("option",{value:"high"},"high",-1),t("option",{class:"is-warning",value:"medium"},"medium",-1),t("option",{class:"is-success",value:"low"},"low",-1)])),_:1},8,["modelValue"]),o(r,{class:"task-list__filter",type:"is-success","icon-right":"plus",rounded:"",onClick:s[3]||(s[3]=e=>i.$emit("createTask"))}),t("div",Q,[u.value.length>0?(w(),I(r,{key:0,class:"task-list__filter",type:"is-danger","icon-right":"delete",rounded:"",onClick:s[4]||(s[4]=e=>i.$emit("deleteTasks",u.value.map(_=>_.id)))})):P("",!0),o(g,{class:"task-list__filter task-list__search",modelValue:a.value.search,"onUpdate:modelValue":s[5]||(s[5]=e=>a.value.search=e),placeholder:"Поиск",rounded:""},null,8,["modelValue"])])]),_:1})]),t("div",W,[o(h,{data:b.value,paginated:"","pagination-rounded":"",draggable:"",hoverable:"",checkable:"","mobile-cards":"","checked-rows":u.value,"onUpdate:checkedRows":s[6]||(s[6]=e=>u.value=e),"per-page":a.value.perPage},{empty:l(()=>s[10]||(s[10]=[t("div",{class:"has-text-centered"},"No records",-1)])),default:l(()=>[o(k,{label:"ID"},{default:l(e=>[U(V(e.row.id),1)]),_:1}),o(k,{label:"Заголовок"},{default:l(e=>[t("a",{class:"task-list__link",onClick:_=>i.$emit("openTask",e.row.id)},V(e.row.title),9,X)]),_:1}),o(k,{label:"Приоритет"},{default:l(e=>[t("span",{class:N({tag:!0,"is-rounded":!0,"task-list__priority":!0,"is-success":e.row.priority==="low","is-warning":e.row.priority==="medium","is-danger":e.row.priority==="high"}),rounded:""},[o(n,{icon:"fire"}),U(V(e.row.priority),1)],2)]),_:1}),o(k,{label:"Выполнено",centered:""},{default:l(e=>[o(T,{modelValue:e.row.isCompleted,"onUpdate:modelValue":_=>e.row.isCompleted=_,onInput:_=>c(e.row)},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),o(k,{"custom-key":"actions"},{default:l(e=>[t("div",Y,[o(r,{type:"is-info","icon-right":"pencil",size:"is-small",onClick:_=>i.$emit("editTask",e.row.id),rounded:""},null,8,["onClick"]),o(r,{type:"is-danger","icon-right":"delete",size:"is-small",onClick:_=>i.$emit("deleteTask",e.row.id),rounded:""},null,8,["onClick"])])]),_:1})]),_:1},8,["data","checked-rows","per-page"])])])}}}),ee=A(Z,[["__scopeId","data-v-750581dd"]]),se={class:"to-do-page"},te={class:"container"},ne=L({__name:"ToDoList",setup(D){const v=K(),p=G(),{tasksList:f}=B(p),a=R("tasks",f.value),u=new z,b=new O,c=S(!1),i=n=>{c.value=!0,v.push({name:C.TASK,params:{id:n}})},s=n=>{c.value=!0,v.push({name:C.EDIT,params:{id:n}})},m=()=>{c.value=!0,v.push({name:C.CREATE})},r=()=>{c.value=!1,v.push({name:C.LIST})},g=(n,T)=>{p.updateTask(n,T),u.open({message:"Задача успешно обновлена",type:"is-success",duration:2e3})},y=n=>{b.confirm({title:"Удалить задачу",message:"Вы уверены, что хотите удалить задачу?",confirmText:"Удалить",cancelText:"Отмена",type:"is-danger",hasIcon:!0,onConfirm:()=>{p.deleteTask(n),u.open({message:"Задача успешно удалена",type:"is-success",duration:2e3})}})},k=n=>{b.confirm({title:"Удалить задачи",message:"Вы уверены, что хотите удалить эти задачи?",confirmText:"Удалить",cancelText:"Отмена",type:"is-danger",hasIcon:!0,onConfirm:()=>{p.deleteTasks(n),u.open({message:"Задачи успешно удалены",type:"is-success",duration:2e3})}})};return M(()=>f.value,()=>{console.log("Я тут"),a.value=f.value}),j(()=>{p.setTasks(a.value)}),(n,T)=>{const h=d("b-sidebar");return w(),x("div",se,[t("div",te,[o($(ee),{tasks:$(f),onOpenTask:i,onEditTask:s,onCreateTask:m,onDeleteTask:y,onDeleteTasks:k,onUpdateTask:g},null,8,["tasks"])]),o(h,{class:"to-do-page__sidebar",modelValue:c.value,"onUpdate:modelValue":T[0]||(T[0]=e=>c.value=e),fullheight:"",overlay:!1,right:"",mobile:"fullwidth",scroll:"keep",onClose:r},{default:l(()=>[o($(q),null,{default:l(({Component:e})=>[(w(),I(F(e),{"close-action":r}))]),_:1})]),_:1},8,["modelValue"])])}}});export{ne as default};
